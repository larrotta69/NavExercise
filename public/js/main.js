function Utility(){window.UtilThat=this,window.over=document.getElementsByClassName("overlay")[0],window.click=document.createEvent("HTMLEvents"),click.initEvent("click",!0,!1)}function NavigationMobile(){}function Navigation(){}Utility.prototype.removeClassToAll=function(e,t){var i=document.getElementsByClassName(e);Array.prototype.forEach.call(i,function(e,i){e.classList.remove(t)})},Utility.prototype.checkMobile=function(){return window.innerWidth<=768?!0:!1},Utility.prototype.showOverlay=function(){UtilThat.showElement(over)},Utility.prototype.overlayEvent=function(){var e=document.getElementsByClassName("sub_menu"),t=document.getElementsByClassName("menu_item_subitem");over.addEventListener("click",function(){UtilThat.hideElement(over),Array.prototype.forEach.call(e,function(e,t){UtilThat.hideElement(e)}),Array.prototype.forEach.call(t,function(e,t){e.classList.remove("activeTab")})})},Utility.prototype.showElement=function(e){e.style.display="block",setTimeout(function(){e.className+=" active"},10)},Utility.prototype.hideElement=function(e){e.classList.remove("active"),setTimeout(function(){e.style.display="none"},250)};var util=new Utility;NavigationMobile.prototype.init=function(){console.log("mobile"),window.MobileThat=this,window.iconOpen=document.getElementById("open_mobile"),window.iconClose=document.getElementById("close_mobile"),this.headerEvents(),this.overlayEvents()},NavigationMobile.prototype.headerEvents=function(){iconOpen.addEventListener("click",function(){document.getElementById("menu_mobile").className+=" open",document.getElementsByClassName("banner")[0].className+=" open",document.getElementsByClassName("navigation_mobile")[0].className+=" headerOpen",util.showElement(over),this.className+=" hideIcon",iconClose.classList.remove("hideIcon")}),iconClose.addEventListener("click",function(){over.dispatchEvent(click),this.className+=" hideIcon"})},NavigationMobile.prototype.overlayEvents=function(){over.addEventListener("click",function(){document.getElementById("menu_mobile").classList.remove("open"),document.getElementsByClassName("banner")[0].classList.remove("open"),document.getElementsByClassName("navigation_mobile")[0].classList.remove("headerOpen"),over.classList.remove("active"),over.style.display="none",iconOpen.classList.remove("hideIcon"),iconClose.className+=" hideIcon"})};var navMobile=new NavigationMobile;navMobile.init(),Navigation.prototype.init=function(){window.Mythat=this,this.query(this.createNav,"/api/nav.json"),this.keyboardEvents(),util.overlayEvent()},Navigation.prototype.query=function(e,t){var i=new XMLHttpRequest;i.open("GET",t,!0),i.onload=function(){200==i.status&&e(JSON.parse(i.responseText))},i.send()},Navigation.prototype.createNav=function(e){var t=document.getElementsByClassName("menu")[0],i=document.getElementsByClassName("list_mobile")[0],n="",o="";Array.prototype.forEach.call(e.items,function(e,l){var a=l+1;0==e.items.length?(t.innerHTML+='<li class="menu_item"><a href="'+e.url+'">'+e.label+"</a></li>",i.innerHTML+='<li class="menu_mobile_item menu_mobile_item_no"><a href="'+e.url+'">'+e.label+"</a></li>"):(t.innerHTML+='<li class="menu_item menu_item_subitem"><p>'+e.label+'</p><ul class="sub_menu list galaxie"></ul></li>',i.innerHTML+='<li class="menu_mobile_item menu_mobile_item_subitem"><p class="garde_bold">'+e.label+'</p><img class="icon_arrow" src="images/arrow.svg" /><ul class="sub_menu_mobile list galaxie"></ul></li>',n=t.querySelectorAll(".menu_item")[a],o=i.querySelectorAll(".menu_mobile_item")[a-1],Array.prototype.forEach.call(e.items,function(e,t){n.querySelectorAll(".sub_menu")[0].innerHTML+='<li><a href="'+e.url+'">'+e.label+"</a></li>",o.querySelectorAll(".sub_menu_mobile")[0].innerHTML+='<li><a class="galaxie" href="'+e.url+'">'+e.label+"</a></li>"}))}),Mythat.navEvents(),Mythat.mobileNavEvents()},Navigation.prototype.subItemEvents=function(e,t){var i=e.querySelectorAll("li"),n=document.getElementsByClassName("menu_item_subitem");Array.prototype.forEach.call(i,function(e,i){e.addEventListener("click",function(){util.hideElement(over),Array.prototype.forEach.call(t,function(e,t){util.hideElement(e)}),Array.prototype.forEach.call(n,function(e,t){setTimeout(function(){e.classList.remove("activeTab")},1)})})})},Navigation.prototype.navEvents=function(e){var t=document.getElementsByClassName("menu_item_subitem"),i=document.getElementsByClassName("sub_menu");Array.prototype.forEach.call(t,function(e,n){Mythat.subItemEvents(e,i),e.addEventListener("click",function(){var e=this.querySelectorAll("ul")[0];Array.prototype.forEach.call(t,function(e,t){e.classList.remove("activeTab")}),this.classList.contains("activeTab")&&this.classList.remove("activeTab"),this.className+=" activeTab",util.removeClassToAll("sub_menu","active"),util.showOverlay(),util.showElement(e)})})},Navigation.prototype.mobileNavEvents=function(e){var t=document.getElementsByClassName("menu_mobile_item_subitem"),i=document.getElementsByClassName("menu_mobile_item_no"),n=document.getElementsByClassName("sub_menu_mobile"),o=0;Array.prototype.forEach.call(t,function(e,i){e.addEventListener("click",function(){this.classList.contains("secondaryActive")?(this.style.height="48px",this.classList.remove("secondaryActive"),this.querySelectorAll(".icon_arrow")[0].classList.remove("arrow_open")):(Array.prototype.forEach.call(t,function(e,t){e.style.height="48px",e.querySelectorAll(".icon_arrow")[0].classList.remove("arrow_open"),e.classList.remove("secondaryActive")}),o=48*(this.querySelectorAll(".sub_menu_mobile li").length+1),this.className+=" secondaryActive",this.style.height=o+"px",this.querySelectorAll(".icon_arrow")[0].className+=" arrow_open")})}),Array.prototype.forEach.call(n,function(e,t){var i=e.querySelectorAll("li");Array.prototype.forEach.call(i,function(e,t){e.addEventListener("click",function(){over.dispatchEvent(click)})})}),Array.prototype.forEach.call(i,function(e,t){e.addEventListener("click",function(){over.dispatchEvent(click)})})},Navigation.prototype.keyboardEvents=function(){document.onkeydown=function(e){27==e.keyCode&&over.dispatchEvent(click)}};var nav=new Navigation;nav.init();